<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self'; img-src 'self' data:; font-src 'self'; connect-src 'self';">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Optimiseur de prompts</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" type="image/png" href="assets/imgs/suPrompt_fav.png">
    <link rel="apple-touch-icon" href="assets/imgs/suPrompt_fav.png">
</head>

<body class="dark">
    <header class="site-header">
        <div class="site-header-inner">
            <img src="assets/imgs/suPrompt_fav.png" alt="Logo Suprompts" class="site-logo">
            <h1 class="site-title">Suprompts - Optimiseur de prompts</h1>
        </div>
    </header>
    <div class="container">
        <div class="mobile-tabs">
            <button class="mobile-tab-button" data-target="sections" aria-label="Afficher les sections">Sections</button>
            <button class="mobile-tab-button" data-target="editor" aria-label="Afficher l'√©diteur">√âdition</button>
            <button class="mobile-tab-button" data-target="prompt" aria-label="Afficher le prompt final">Prompt
                final</button>
        </div>
        <div class="left-panel panel-active" data-panel-id="sections">
            <h2>Sections</h2>
            <div class="selectors-group">
                <div class="mode-toggle selector-item">
                    <span class="selector-icon">‚öôÔ∏è</span>
                    <label for="mode-select">Mode</label>
                    <select id="mode-select" aria-label="S√©lectionner le mode d'interface">
                        <option value="simple">Simple</option>
                        <option value="advanced">Avanc√©</option>
                    </select>
                    <span class="help-tooltip" data-tooltip="Simple : interface √©pur√©e pour d√©butants. Avanc√© : tous les contr√¥les visibles.">?</span>
                </div>
                <div class="selector-divider"></div>
                <div class="model-selector selector-item">
                    <span class="selector-icon">ü§ñ</span>
                    <label for="model-select">Mod√®le</label>
                    <select id="model-select" aria-label="S√©lectionner le mod√®le d'IA"></select>
                    <button id="model-info-btn" class="model-info-btn" aria-label="Informations sur le mod√®le" title="Voir les recommandations pour ce mod√®le">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" />
                            <path d="M8 7V11M8 5V5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        </svg>
                    </button>
                </div>
                <div class="prompt-type-selector selector-item">
                    <span class="selector-icon">üìù</span>
                    <label for="prompt-type-select">Type</label>
                    <select id="prompt-type-select" aria-label="S√©lectionner le type de prompt"></select>
                    <span class="help-tooltip" data-tooltip="G√©n√©ral, Cr√©atif, Technique ou Avanc√©. D√©finit les sections recommand√©es.">?</span>
                </div>
                <div class="technique-selector selector-item">
                    <span class="selector-icon">üéØ</span>
                    <label for="technique-select">Technique</label>
                    <select id="technique-select" aria-label="S√©lectionner la technique de prompting"></select>
                    <button id="technique-info-btn" class="model-info-btn" aria-label="Informations sur la technique" title="Voir les d√©tails de cette technique">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5" />
                            <path d="M8 7V11M8 5V5.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                        </svg>
                    </button>
                </div>
                <div class="selector-divider"></div>
                <div class="persona-selector selector-item">
                    <span class="selector-icon">üë§</span>
                    <label>Persona</label>
                    <button id="persona-library-btn" class="secondary-button persona-btn" type="button">
                        Biblioth√®que
                    </button>
                    <button id="persona-builder-btn" class="secondary-button persona-btn" type="button">
                        Builder
                    </button>
                    <span class="help-tooltip" data-tooltip="Biblioth√®que : personas pr√™ts √† l'emploi. Builder : cr√©ez votre persona personnalis√©.">?</span>
                </div>
            </div>
            <div class="paragraph-cards"></div>
        </div>
        <div class="center-panel" data-panel-id="editor">
            <h2>Cartes</h2>
            <div id="cards-container"></div>
        </div>
        <div class="right-panel" data-panel-id="prompt">
            <h2>Prompt final</h2>

            <div class="prompt-manager-grid">
                <!-- Row 1: Header -->
                <div class="prompt-header-row">
                    <input id="prompt-name-input" type="text" placeholder="Nom du prompt" class="flex-grow" aria-label="Nom du prompt">
                    <button id="favorite-prompt-btn" class="icon-button" title="Favori" aria-label="Ajouter aux favoris">‚òÜ</button>
                    <button id="save-prompt-btn" class="primary-button action-button" aria-label="Sauvegarder le prompt">Sauvegarder</button>
                    <button id="save-version-btn" class="secondary-button action-button" title="Cr√©er une version" aria-label="Cr√©er une nouvelle version">v+</button>
                </div>

                <!-- Row 2: Management -->
                <div class="prompt-tools-row">
                    <div class="select-group flex-grow">
                        <select id="saved-prompts-select" class="full-width" aria-label="Charger un prompt ou mod√®le">
                            <option value>Charger un prompt ou
                                mod√®le...</option>
                        </select>
                    </div>
                    <button id="load-prompt-btn" class="secondary-button action-button" title="Charger le prompt s√©lectionn√©" aria-label="Charger le prompt">Charger</button>
                    <button id="delete-prompt-btn" class="secondary-button danger-button action-button" title="Supprimer le prompt s√©lectionn√©" aria-label="Supprimer le prompt">Supprimer</button>
                </div>

                <!-- Row 3: Format & Actions -->
                <div class="prompt-actions-row">
                    <select id="language" class="compact-select" title="Format de sortie" aria-label="Choisir le format de sortie">
                        <option value="markdown">MD</option>
                        <option value="xml">XML</option>
                        <option value="json">JSON</option>
                        <option value="yaml">YAML</option>
                    </select>

                    <div class="divider-vertical"></div>

                    <label class="icon-button-label secondary-button action-button" title="Importer une sauvegarde JSON" aria-label="Importer une sauvegarde JSON">
                        Importer <input id="import-prompt-input" type="file" accept="application/json" hidden>
                    </label>
                    <button id="export-prompt-btn" class="secondary-button action-button" title="Exporter une sauvegarde JSON" aria-label="Exporter une sauvegarde JSON">Exporter</button>

                    <div class="divider-vertical"></div>

                    <button id="ab-open-btn" class="secondary-button action-button" aria-label="Ouvrir le comparateur A/B">Comparer</button>
                    <button id="copy-prompt-btn" class="primary-button action-button flex-grow" aria-label="Copier le prompt">Copier</button>
                </div>
                <span id="copy-feedback" class="copy-feedback" aria-live="polite"></span>
            </div>
            <div class="analysis-panel">
                <div class="analysis-header">
                    <span>Qualit√© du prompt</span>
                    <span id="analysis-score">Score&nbsp;: --/100</span>
                    <button id="analysis-toggle" class="secondary-button analysis-toggle" type="button" aria-expanded="true" aria-label="Masquer les conseils">Masquer les
                        conseils</button>
                </div>
                <span id="completion-indicator"></span>
                <ul id="analysis-recommendations" class="analysis-recommendations"></ul>
                <p class="analysis-note">Analyse locale (aucun appel
                    externe). Pr√©vue pour int√©gration API ult√©rieure.</p>
            </div>
            <p id="hint-translate-main" class="hint-translate-main">üí°
                <strong>Conseil :</strong> Les mod√®les d'IA sont
                g√©n√©ralement plus performants en anglais. Pensez √† traduire
                votre prompt final pour de meilleurs r√©sultats.</p>
            <pre id="prompt-output" aria-label="Sortie du prompt"></pre>
        </div>
    </div>
    <div id="ab-overlay" class="ab-overlay ab-overlay-hidden" aria-hidden="true">
        <div class="ab-overlay-content">
            <div class="ab-overlay-header">
                <h3>Comparaison de prompts</h3>
                <button id="ab-close-btn" class="secondary-button" aria-label="Fermer la comparaison">Fermer</button>
            </div>
            <div class="ab-overlay-body">
                <div class="ab-column ab-left-column">
                    <h4>Prompt gauche (actif)</h4>
                    <div id="ab-left-cards" class="ab-left-cards"></div>
                </div>
                <div class="ab-column ab-right-column">
                    <h4>Prompt droite (lecture seule)</h4>
                    <pre id="ab-right-prompt" class="ab-right-prompt"></pre>
                    <button id="ab-apply-right-to-left" class="secondary-button" aria-label="Remplacer le prompt de gauche par celui de droite">Remplacer
                        gauche par
                        droite</button>
                </div>
                <div class="ab-column ab-list-column">
                    <h4>Prompts √† comparer</h4>
                    <div class="ab-list-group">
                        <h5>Mod√®les</h5>
                        <ul id="ab-templates-list" class="ab-prompts-list"></ul>
                    </div>
                    <div class="ab-list-group">
                        <h5>Enregistrements</h5>
                        <ul id="ab-named-prompts-list" class="ab-prompts-list"></ul>
                    </div>
                    <div class="ab-list-group">
                        <h5>Versions du ¬´ sans nom ¬ª</h5>
                        <ul id="ab-versions-list" class="ab-prompts-list"></ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirm-modal" class="modal-overlay" aria-hidden="true">
        <div class="modal-box" role="dialog" aria-modal="true" aria-labelledby="confirm-modal-header">
            <div id="confirm-modal-header" class="modal-header">Confirmation</div>
            <div class="modal-body" id="confirm-modal-message"></div>
            <div class="modal-footer">
                <button id="confirm-modal-cancel" class="modal-btn modal-btn-cancel">Annuler</button>
                <button id="confirm-modal-ok" class="modal-btn modal-btn-confirm">Confirmer</button>
            </div>
        </div>
    </div>

    <!-- Input Modal -->
    <div id="input-modal" class="modal-overlay" aria-hidden="true">
        <div class="modal-box" role="dialog" aria-modal="true" aria-labelledby="input-modal-header">
            <div id="input-modal-header" class="modal-header">Saisie
                requise</div>
            <div class="modal-body">
                <p id="input-modal-message"></p>
                <input type="text" id="input-modal-input" class="full-width">
            </div>
            <div class="modal-footer">
                <button id="input-modal-cancel" class="modal-btn modal-btn-cancel">Annuler</button>
                <button id="input-modal-ok" class="modal-btn modal-btn-confirm">Valider</button>
            </div>
        </div>
    </div>

    <div id="model-info-modal" class="model-info-modal">
        <div class="model-info-content">
            <div class="model-info-header">
                <div>
                    <h2 class="model-info-title" id="model-info-name"></h2>
                    <div class="model-info-vendor" id="model-info-vendor"></div>
                </div>
                <button class="model-info-close" id="model-info-close" aria-label="Fermer">&times;</button>
            </div>

            <div class="model-info-section">
                <h3>üìã Format pr√©f√©r√©</h3>
                <p id="model-info-format"></p>
            </div>

            <div class="model-info-section">
                <h3>üéØ Techniques support√©es</h3>
                <ul id="model-info-techniques"></ul>
            </div>

            <div class="model-info-section">
                <h3>üí° Instructions sp√©ciales</h3>
                <p id="model-info-instructions"></p>
            </div>

            <div class="model-info-section">
                <h3>‚öôÔ∏è Notes de formatage</h3>
                <div id="model-info-format-notes"></div>
            </div>

            <div class="model-info-section">
                <h3>üìä Limite de tokens</h3>
                <p id="model-info-tokens"></p>
            </div>
        </div>
    </div>

    <div id="technique-info-modal" class="model-info-modal">
        <div class="model-info-content">
            <div class="model-info-header">
                <div>
                    <h2 class="model-info-title" id="technique-info-name"></h2>
                </div>
                <button class="model-info-close" id="technique-info-close" aria-label="Fermer">&times;</button>
            </div>

            <div class="model-info-section">
                <h3>üìñ Description</h3>
                <p id="technique-info-description"></p>
            </div>

            <div class="model-info-section">
                <h3>‚úÖ Sections requises</h3>
                <ul id="technique-info-required"></ul>
            </div>

            <div class="model-info-section">
                <h3>‚ûï Sections optionnelles</h3>
                <ul id="technique-info-optional"></ul>
            </div>

            <div class="model-info-section">
                <h3>ü§ñ Mod√®les compatibles</h3>
                <p id="technique-info-models"></p>
            </div>

            <div class="model-info-section">
                <h3>üíº Cas d'usage</h3>
                <ul id="technique-info-usecases"></ul>
            </div>

            <div class="model-info-section" id="technique-info-bestpractices-section">
                <h3>üí° Conseils pour ce mod√®le</h3>
                <ul id="technique-info-bestpractices"></ul>
                <p id="technique-info-tip" class="technique-tip"></p>
            </div>

            <button id="technique-apply-template" class="primary-button technique-apply-btn">
                Appliquer ce template
            </button>
        </div>
    </div>

    <!-- Persona Library Modal -->
    <div id="persona-library-modal" class="model-info-modal persona-modal">
        <div class="model-info-content persona-modal-content">
            <div class="model-info-header">
                <div>
                    <h2 class="model-info-title">üìö Biblioth√®que de
                        Personas</h2>
                </div>
                <button class="model-info-close" id="persona-library-close" aria-label="Fermer">&times;</button>
            </div>

            <div class="persona-search-bar">
                <input type="text" id="persona-search" placeholder="Rechercher un persona..." class="full-width">
            </div>

            <div class="persona-categories" id="persona-categories"></div>

            <div class="persona-list" id="persona-list"></div>

            <div class="persona-preview" id="persona-preview">
                <h3 id="persona-preview-name"></h3>
                <p id="persona-preview-description"></p>
                <div class="persona-dimensions" id="persona-preview-dimensions"></div>
                <pre id="persona-preview-prompt" class="persona-prompt-preview"></pre>
                <button id="persona-apply-btn" class="primary-button full-width">
                    Appliquer ce persona
                </button>
            </div>
        </div>
    </div>

    <!-- Persona Builder Modal -->
    <div id="persona-builder-modal" class="model-info-modal persona-modal">
        <div class="model-info-content persona-modal-content">
            <div class="model-info-header">
                <div>
                    <h2 class="model-info-title">üõ†Ô∏è Builder de Persona</h2>
                </div>
                <button class="model-info-close" id="persona-builder-close" aria-label="Fermer">&times;</button>
            </div>

            <div class="persona-builder-form">
                <div class="persona-dimension-group">
                    <label>‚úèÔ∏è Nom du persona</label>
                    <input type="text" id="builder-name" placeholder="Ex: Mon Expert Python" class="full-width">
                </div>

                <div class="persona-dimension-group" id="dimension-style">
                    <label>üé≠ Style de communication</label>
                    <select id="builder-style"></select>
                </div>

                <div class="persona-dimension-group" id="dimension-expertise">
                    <label>üß† Domaine d'expertise</label>
                    <select id="builder-expertise"></select>
                </div>

                <div class="persona-dimension-group" id="dimension-behavior">
                    <label>‚ö° Comportement</label>
                    <select id="builder-behavior"></select>
                </div>

                <div class="persona-dimension-group" id="dimension-experience">
                    <label>üìä Niveau d'exp√©rience</label>
                    <select id="builder-experience"></select>
                </div>

                <div class="persona-dimension-group">
                    <label>üìù Contexte personnalis√© (optionnel)</label>
                    <textarea id="builder-context" rows="3" placeholder="Ajoutez des d√©tails sp√©cifiques..."></textarea>
                </div>

                <div class="persona-dimension-group">
                    <label>ü§ñ Format adapt√© au mod√®le</label>
                    <select id="builder-model-format">
                        <option value="auto">üîÑ Auto (selon mod√®le
                            s√©lectionn√©)</option>
                        <option value="claude">Claude (XML
                            structur√©)</option>
                        <option value="gpt">GPT (System message)</option>
                        <option value="gemini">Gemini (Markdown)</option>
                        <option value="llama">Llama/Mistral
                            (Direct)</option>
                        <option value="deepseek">DeepSeek
                            (Structur√©)</option>
                        <option value="default">Standard (Markdown
                            universel)</option>
                    </select>
                </div>

                <div class="persona-dimension-group">
                    <label>üìà Niveau de profondeur</label>
                    <select id="builder-depth-level">
                        <option value="basic">Basique ‚Äì Coh√©rence de surface
                            (style, ton)</option>
                        <option value="advanced">Avanc√© ‚Äì Nuances
                            √©motionnelles et expertise</option>
                        <option value="expert">Expert ‚Äì Raisonnement
                            complexe et cr√©ativit√© authentique</option>
                    </select>
                </div>

                <div class="persona-dimension-group persona-reflection-mode">
                    <label class="checkbox-label">
                        <input type="checkbox" id="builder-reflection-mode">
                        <span>üß† Mode R√©flexion (R-CHAR)</span>
                    </label>
                    <p class="dimension-hint">Active la r√©flexion
                        m√©tacognitive : le LLM r√©fl√©chira dans
                        <code>&lt;think&gt;</code> avant de r√©pondre dans
                        <code>&lt;answer&gt;</code></p>
                </div>

                <div class="persona-dimension-group persona-reflection-mode">
                    <label class="checkbox-label">
                        <input type="checkbox" id="builder-evaluation-criteria">
                        <span>‚úÖ Crit√®res d'auto-√©valuation</span>
                    </label>
                    <p class="dimension-hint">Le LLM v√©rifiera la coh√©rence
                        de ses r√©ponses avec les limites de connaissances et
                        le comportement du persona</p>
                </div>
            </div>

            <div class="persona-builder-preview">
                <h4>Aper√ßu du persona g√©n√©r√© <span id="builder-format-indicator" class="format-indicator"></span></h4>
                <pre id="builder-preview-output" class="persona-prompt-preview"></pre>
                <div id="builder-hints" class="builder-hints">
                    <p id="hint-rag" class="hint-rag" style="display: none;">üìö <strong>Persona sp√©cialis√©
                            d√©tect√© :</strong> Pour de meilleurs r√©sultats,
                        fournissez de la documentation externe ou envisagez
                        un syst√®me RAG (Retrieval-Augmented Generation).</p>
                </div>
            </div>

            <div class="persona-builder-actions">
                <button id="builder-apply-btn" class="primary-button">
                    Appliquer ce persona
                </button>
                <button id="builder-save-btn" class="secondary-button">
                    üíæ Sauvegarder dans ma biblioth√®que
                </button>
            </div>
        </div>
    </div>

    <script src="assets/js/main.js" type="module"></script>
</body>

</html>